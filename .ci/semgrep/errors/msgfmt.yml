rules:
  # To fix:
  #   find internal/service/*/*.go -print | xargs ruby -p -i -e 'gsub(/diag.FromErr\(fmt.Errorf\((.*)\)\)/, "diag.Errorf(\\1)")'
  # then
  #   find internal/service/*/*.go -print | xargs ruby -p -i -e 'gsub(/diag.Errorf\((.*)%w(.*)\)/, "diag.Errorf(\\1%s\\2)")'
  # and maybe
  #   goimports -w ./internal/service
  - id: no-diag.FromErr-fmt.Errorf
    languages: [go]
    message: Use diag.Errorf(...) instead of diag.FromErr(fmt.Errorf(...))
    paths:
      include:
        - internal/
    patterns:
      - pattern-regex: diag.FromErr\(fmt.Errorf\(
    severity: ERROR
